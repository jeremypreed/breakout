var level = {
	1: 
	 [[0,0,0,0,0,0,0,0],
	 [0,0,0,0,0,0,0,0],
	 [0,0,0,0,0,0,0,0],
	 [8,8,8,8,8,8,8,8],
	 [1,1,1,1,1,1,1,1],
	 [2,2,2,2,2,2,2,2],
	 [3,3,3,3,3,3,3,3],
	 [4,4,4,4,4,4,4,4],
	 [5,5,5,5,5,5,5,5],
	 [6,6,6,6,6,6,6,6],
	 [7,7,7,7,7,7,7,7]],
	2: 
	 [[0,0,0,0,0,0,0,0],
	 [0,0,0,0,0,0,0,0],
	 [0,0,0,4,4,0,0,0],
	 [0,0,0,0,0,0,0,0],
	 [0,0,2,2,2,2,0,0],
	 [0,0,0,0,0,0,0,0],
	 [0,7,7,7,7,7,7,0],
	 [0,0,0,0,0,0,0,0],
	 [1,1,1,1,1,1,1,1],
	 [0,0,0,0,0,0,0,0],
	 [0,3,3,3,3,3,3,0],
	 [0,0,0,0,0,0,0,0],
	 [0,0,5,5,5,5,0,0],
	 [0,0,0,0,0,0,0,0],
	 [0,0,0,6,6,0,0,0]],
	3: 
	 [[0,0,0,0,0,0,0,0],
	 [0,0,0,0,0,0,0,0],
	 [0,0,0,0,0,0,0,0],
	 [0,2,2,2,2,2,2,0],
	 [0,2,2,2,2,2,2,0],
	 [0,2,1,1,1,1,2,0],
	 [0,2,1,1,1,1,2,0],
	 [0,2,1,0,0,1,2,0],
	 [0,2,1,0,0,1,2,0],
	 [0,2,1,0,0,1,2,0],
	 [0,2,1,0,0,1,2,0],
	 [0,2,1,0,0,1,2,0],
	 [0,2,1,1,1,1,2,0],
	 [0,2,1,1,1,1,2,0],
	 [0,2,2,2,2,2,2,0],
	 [0,2,2,2,2,2,2,0]],
	4: 
	 [[0,0,0,0,0,0,0,0],
	  [0,0,0,0,0,0,0,0],
	  [0,0,0,0,0,0,0,0],
	  [7,2,1,7,4,1,2,7],
	  [7,2,1,7,4,1,2,7],
	  [7,2,1,7,4,1,2,7],
	  [3,5,4,6,1,3,5,4],
	  [3,5,4,6,1,3,5,4],
	  [3,5,4,6,1,3,5,4],
	  [0,0,0,0,0,0,0,0],
	  [0,0,0,0,0,0,0,0],
	  [0,0,0,0,0,0,0,0],
	  [7,2,1,7,4,1,2,7],
	  [7,2,1,7,4,1,2,7],
	  [7,2,1,7,4,1,2,7],
	  [3,5,4,6,1,3,5,4],
	  [3,5,4,6,1,3,5,4],
	  [3,5,4,6,1,3,5,4]],
	5: 
	 [[0,0,0,0,0,0,0,0],
	 [1,0,0,0,0,0,0,2],
	 [1,1,0,0,0,0,2,2],
	 [0,1,5,0,0,5,2,0],
	 [0,0,5,6,6,5,0,0],
	 [0,0,5,6,6,5,0,0],
	 [0,3,5,0,0,5,4,0],
	 [3,3,0,0,0,0,4,4],
	 [3,0,0,0,0,0,0,4],
	 [1,0,0,0,0,0,0,2],
	 [1,1,0,0,0,0,2,2],
	 [0,1,5,0,0,5,2,0],
	 [0,0,5,6,6,5,0,0],
	 [0,0,5,6,6,5,0,0],
	 [0,3,5,0,0,5,4,0],
	 [3,3,0,0,0,0,4,4],
	 [3,0,0,0,0,0,0,4]],
	6: 
	 [[1,0,1,0,1,0,1,0],
	 [0,1,0,1,0,1,0,1],
	 [3,0,3,0,3,0,3,0],
	 [0,3,0,3,0,3,0,3],
	 [5,0,5,0,5,0,5,0],
	 [0,5,0,5,0,5,0,5],
	 [3,0,3,0,3,0,3,0],
	 [0,3,0,3,0,3,0,3],
	 [7,0,7,0,7,0,7,0],
	 [0,7,0,7,0,7,0,7],
	 [3,0,3,0,3,0,3,0],
	 [0,3,0,3,0,3,0,3]],
	7: 
	 [[1,1,1,1,0,0,0,0],
	 [1,1,1,1,0,0,0,0],
	 [1,1,1,1,0,0,0,0],
	 [1,1,1,1,0,0,0,0],
	 [1,1,1,1,0,0,0,0],
	 [1,1,1,1,0,0,0,0],
	 [1,1,1,1,0,0,0,0],
	 [1,1,1,1,0,0,0,0],
	 [1,1,1,1,0,0,0,0],
	 [1,1,1,1,0,0,0,0],
	 [1,1,1,1,0,0,0,0],
	 [1,1,1,1,0,0,0,0],
	 [1,1,1,1,0,0,0,0],
	 [1,1,1,1,0,0,0,0],
	 [1,1,1,1,0,0,0,0]],
	8: 
	 [[0,0,0,0,0,0,0,0],
	 [0,0,0,0,0,0,0,0],
	 [4,4,4,4,4,4,4,4],
	 [0,0,0,0,0,0,0,0],
	 [0,0,0,0,0,0,0,0],
	 [4,4,4,4,4,4,4,4],
	 [0,0,0,0,0,0,0,0],
	 [0,0,0,0,0,0,0,0],
	 [5,5,5,5,5,5,5,5]],
	9: 
	 [[1,0,0,0,0,0,0,0],
	 [0,0,0,0,0,0,0,2],
	 [0,3,0,0,0,0,0,0],
	 [0,0,0,0,0,0,4,0],
	 [0,0,5,0,0,0,0,0],
	 [0,0,0,0,0,6,0,0],
	 [0,0,0,7,0,0,0,0]],
	10: 
	 [[0,0,0,0,0,0,0,0],
	 [0,0,0,0,0,0,0,0],
	 [0,0,0,0,0,0,0,0],
	 [0,0,0,0,0,0,0,0],
	 [0,0,0,0,0,0,0,0],
	 [0,0,0,0,0,0,0,0],
	 [1,2,3,4,0,5,6,7]]
}

function new_game() {
	game.lives = 3;
	game.score = 0;
	ball.speed = 10;
	game.level = 1;
	loadLvl(game.level);
	count_blocks();
}

function new_stage() {
	game.score += 1000;
	game.level += 1;
	loadLvl(game.level);
	count_blocks();
	init();
	game.screen = 'play';
}

function count_blocks() {
	game.blocks = 0;
	for (var i = 0, len = blocks.length; i < len; i++) {
		var a = blocks[i];
		if (a.t==0) { game.blocks += 1; }
	}	
}

function loadLvl(x) {
	
	blocks = [];
	var rows = level[x];
	
	if (level[x]) {
		for (var i=0, len=rows.length; i<len; i++) {
			for (var j=0, len2=rows[i].length; j<len2; j++) {
				var a = rows[i][j];
				
				if (a==0) {
					// empty space
					continue; 
				} else {
					if (a<=7) { 
					// normal block
						type = 0; 
					} else if (a==8) { 
					// special block 8
						type = 1;
					}
					blocks.push({
						sprite: block_sp[a],
						x: j*80,
						y: i*20,
						w: block_sp[a][0].w,
						h: block_sp[a][0].h,
						t: type
					});
				}
			}
		}
	} else { 
		game.screen = 'thanks';
	}
}